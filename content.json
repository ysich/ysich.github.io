{"meta":{"title":"ysich-game-blog","subtitle":"","description":"","author":"ysich","url":"http://example.com","root":"/"},"pages":[{"title":"about","date":"2023-01-14T10:03:39.000Z","updated":"2023-01-14T10:03:39.849Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":""}],"posts":[{"title":"Lua入门","slug":"Lua入门","date":"2023-01-14T12:40:16.000Z","updated":"2023-01-14T12:43:40.894Z","comments":true,"path":"2023/01/14/Lua入门/","link":"","permalink":"http://example.com/2023/01/14/Lua%E5%85%A5%E9%97%A8/","excerpt":"","text":"Lua入门注意点 循环用do，if语句用then，都使用end结尾 Lua不支持自减和自加操作，只能i=i+1，i=i-1 字符串的第一个位置是1不是0 技巧 Lua的字符串可以存储0x00，可以用字符串存储二进制流 注释 用--开头，来写一段单行注释 1-- 单行注释 用--[[开头，]]结尾，写一段多行注释。 1234--[[ 多行 注释]] 变量对一个变量进行赋值就相当于声明变量，与python相似 声明的变量默认为全局变量1a=1 同时给多个变量赋值，多重赋值 1a,b=1,2 局部变量1local b=2 nil类型没有被声明过的变量都是nil nil类型只有一个值，就是nil nil类似null类型 if(nil)为false number类型1234--支持十六进制表示方法a=0x11--输出为17--科学计数法a=2e10 string类型单引号、双引号1234a=&quot;daeqeq&quot;b=&#x27;sdarrr&#x27;--转义字符\\nd=&quot;sdada\\nsdar&quot; 多行文本多行文本无法使用转义字符 1c=[[asdasfffrrqweqq]] 字符串连接字符串连接符号.. 1234a=&quot;daeqeq&quot;b=&#x27;sdarrr&#x27;c=a..bprint(&quot;asdaf&quot;..&quot;as232&quot;) 数值转字符串1tostring(10) 字符串转数值tonumber转换失败为nil 1tonumber(&quot;193&quot;) 获取字符串长度123a=&quot;daeqeq&quot;print(#a)--等价于s:len() string类型类似char数组Lua中string类型 类似于C里的字符数组，可以包含任意数值包括0x00，可以存储二进制流因为都是原原本本存储 将ascii码转为字符串12s=string.char(65)s=string.char(0x30,0x31,0x32,0x33) 取出string中的某一位的ascii码1234n=string.byte(s,2)print(n)--语法糖，第一个到最后一个s:byte(1，-1) format调用c的接口 12local f=string.format(&quot;%d,%d&quot;,1,2)print(f) function函数函数默认返回值为nil，没有任何返回值则为nil 1234567function function_name() --bodyend--函数名放前面f=function(...) --bodyend 123456function f(a,b,c) print(a,b,c) return aend--c没有传值则为nilprint(f(1,2))--1 函数可以返回多个值12345function f(a,b,c) return a,bendprint(f(1,2)) 多个返回值可以使用多重赋值语句12345function f(a,b,c) return a,bendlocal i,j=f(1,2) tabletable接口123table.insert(a,&quot;d&quot;)--插入元素，末尾添加table.insert(a,2,&quot;d&quot;)--插入元素，第二个位置，后续元素后移local s= table.remove(a,2)--移除第2个元素 table数字下标可以存所有东西(number,string,table,function) 12345a=&#123;1,&quot;ac&quot;,&#123;&#125;,function() end&#125;a[5]=123 --可以直接添加一个元素print(a[1])--获取table长度print(#a) table字符串下标以字符为table的下标 12345678910a=&#123; a=1, b=&quot;1234&quot;, c=function() end, d=123123&#125;print(a[&quot;a&quot;])--下标符合变量命名规范时print(a.a) 全局表_GLua内的所有全局变量都在_G这个table内 包括table.insert中的table(也是全局变量)也存储在_G中，insert为table的下标 1234print(_G[&quot;table&quot;][&quot;insert&quot;])--function: 0000000063be4590--输出值为一个函数--多文件调用知识 布尔型不等于在Lua中不等于使用~=表示 123456789a=trueb=falseprint(1&gt;2)print(1&lt;2)print(1&gt;=2)print(1&lt;=2)print(1==2)--不等于print(1~=2) 与或非只有false和nil表示假其他都表示真，包括0 123print(a and b)print(a or b)print(not a) and``or返回的并不完全是true和false，会直接返回a或者b的值，可以通过短路求值 只有not返回true和false 123456a=nil --真b=0 --假print(a and b) --nilprint(a or b) --0print(not a) --trueprint(b&gt;10 and &quot;yes&quot; or &quot;no&quot;) --no 分支判断if语句1234567if 1&gt;10 then print(&quot;1&gt;10&quot;)elseif 1&lt;10 then print(&quot;1&lt;10&quot;)else print(&quot;no&quot;)end 循环for循环1234567for i=1,10 do print(i)end--步长为2for i=1,10,2 do print(i)end 倒序循环123for i=10,1,-1 do print(i)end i在过程途中不能赋值，赋值了也没用 假如对i赋值会被认定为新建了局部变量 1234for i=10,1,-1 do print(i) local i=1end break通过break退出循环 1234for i=10,1,-1 do print(i) if i == 5 then break endend while循环12345n = 10while n&gt;1 do print(n) n = n - 1end repeat循环和while循环基本一致 多文件调用require和import的区别require实现换个目录后就需要对路径进行变更 个人理解：绝对路径 12345local MyClassBase = require(&quot;app.classes.MyClassBase&quot;)local MyClass = class(&quot;MyClass&quot;, MyClassBase)local Data1 = require(&quot;app.classes.data.Data1&quot;)local Data2 = require(&quot;app.classes.data.Data2&quot;) import实现在模块名前添加多个”.” ，这样 import() 会从更上层的目录开始查找模块。 个人理解：相对路径 12345local MyClassBase = import(&quot;.MyClassBase&quot;)local MyClass = class(&quot;MyClass&quot;, MyClassBase)local Data1 = import(&quot;.data.Data1&quot;)local Data2 = import(&quot;.data.Data2&quot;) require运行指定多文件 末尾不带扩展名 12--.\\?lua 把文件名匹配到？内require(&quot;文件名&quot;) 不同层架文件夹用.分隔 1require(&quot;文件夹名.文件名&quot;) 只会运行一次 12345678--lua文件有可以return返回值local r = require(&#x27;hello&#x27;)--后面调用的都是前面返回的内容require(&#x27;hello&#x27;)require(&#x27;hello&#x27;)require(&#x27;hello&#x27;)require(&#x27;hello&#x27;)print(r) package.path12package.path=package.path..&quot;;./path/?.lua&quot;require(&#x27;hello2&#x27;) 多次调用调用lua文件内的函数 123456789101112--hello.lualocal hello=&#123;&#125;function hello.say() print(&quot;hello world&quot;)end//通过返回tablereturn hello--test.lualocal test=require(&#x27;hello&#x27;)//通过table内的方法调用test.say() 迭代table1234t=&#123;&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;&#125;for i=1,#t,do print(i,t[i])end 迭代器ipairs纯数字连续下标可以用 12345t=&#123;&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;&#125;--下标给i，值给jfor i,j in ipairs(t) do print(i,j)end 1234567891011t=&#123; [1]=&quot;a&quot;, [2]=&quot;b&quot;, [3]=&quot;c&quot;, [5]=&quot;d&quot;&#125;--下标给i，值给jfor i,j in ipairs(t) do --只能遍历到1到3，不连续的后面遍历不到 print(i,j)end 迭代器pairs可以遍历所有下标 pairs内部调用的是next函数 1234567891011t=&#123; [1]=&quot;a&quot;, [2]=&quot;b&quot;, [3]=&quot;c&quot;, [5]=&quot;d&quot;&#125;--下标给i，值给jfor i,j in pairs(t) do --只能遍历到1到3，不连续的后面遍历不到 print(i,j)end 1234567891011t=&#123; apple=&quot;a&quot;, banana=&quot;b&quot;, eraser=&quot;c&quot;, water=&quot;d&quot;&#125;--下标给i，值给jfor i,j in pairs(t) do --只能遍历到1到3，不连续的后面遍历不到 print(i,j)end 元表、元方法语法糖12345678t=&#123; a=0, add=function(tab,num) tab.a=tab.a+num end&#125;--类似于面向对象的方法调用t:add(10)--等价于t.add(t,10) 面向对象123456789101112131415161718192021222324--对象名bag=&#123;&#125;bagmt=&#123; --装入东西的函数 put=function(t,item) table.insert(t.items,item) end, take=function(t) return table.remove(t) end, list=function(t) return table.concat(t.items,&quot;,&quot;) end&#125;bagmt[&quot;__index&quot;]=bagmt--构造函数function bag.new() local t=&#123; items=&#123;&#125; &#125; setmetatable(t,bagmt) return tend 协程coroutine一个lua虚拟机里只能有一个线程 coroutine.create 可创建一个协程返回值为 thread 类型 123456local co=coroutine.create( function() print(&quot;hello world!&quot;) end )","categories":[],"tags":[{"name":"Lua","slug":"Lua","permalink":"http://example.com/tags/Lua/"}]}],"categories":[],"tags":[{"name":"Lua","slug":"Lua","permalink":"http://example.com/tags/Lua/"}]}